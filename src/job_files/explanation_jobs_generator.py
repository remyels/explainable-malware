import os

available_feature_sets = ['saynotooverfittingsemimodel', '2-grams']
available_models = ['rfc', 'mlr', '2layernn', 'xgboost']
available_explainers = ['shap', 'lime']

for feature_set in available_feature_sets:
	for model in available_models:
		for explainer in available_explainers:
			output = open("{}_{}_{}.sh".format(feature_set, model, explainer), "w")
			output.write("#!/bin/bash\n\n")
			output.write("#SBATCH --job-name=mlwexpl\n#SBATCH --account=7648020\n\n")
			output.write("#SBATCH --partition=normal\n")
			output.write("#SBATCH --nodes=1\n")
			output.write("#SBATCH --ntasks-per-node=1\n")
			output.write("#SBATCH --cpus-per-task=1\n")
			output.write("#SBATCH --mem=24000\n")
			output.write("#SBATCH --time=0-10:00:00\n")
			output.write("#SBATCH --mail-type=ALL\n")
			output.write("#SBATCH --mail-user=re135@aub.edu.lb\n\n")

			output.write("module load python/3\n\n")

			output.write("pip install numpy==1.18.4 --user\npip install pandas==0.24.2 --user\npip install shap==0.35.0 --user\npip install lime==0.2.0.0 --user\npip install torch==1.5.0 --user\npip install xgboost==0.82 --user\npip install scikit-learn==0.23.1 --user\npip install bokeh==2.0.2 --user\npip install matplotlib==3.2.1 --user\n\n")

			output.write("python generalized_workflow.py {} {} {}".format(feature_set, model, explainer))

